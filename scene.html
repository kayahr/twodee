<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Dec 29, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
    Scene</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20111229" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<link rel="SHORTCUT ICON" href="favicon.ico"/>
                      
        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="./" id="bannerLeft">
                                                <img src="images/logo.png" alt="TwoDee" />
                </a>
                              <a href="https://github.com/kayahr/twodee/" id="bannerRight">
                                        <img src="https://a248.e.akamai.net/assets.github.com/img/30f550e0d38ceb6ef5b81500c64d970b7fb0f028/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2011-12-29</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.3</span>
                      </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>TwoDee</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="About">About</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="jsdoc/" title="API Documentation">API Documentation</a>
            </li>
          </ul>
                       <h5>Tutorial</h5>
                  <ul>
                  <li class="none">
            <strong>Scene</strong>
          </li>
                  <li class="none">
                          <a href="polygon.html" title="Polygon Node">Polygon Node</a>
            </li>
                  <li class="none">
                          <a href="image.html" title="Image Node">Image Node</a>
            </li>
                  <li class="none">
                          <a href="transformations.html" title="Transformations">Transformations</a>
            </li>
                  <li class="none">
                          <a href="physics.html" title="Physics">Physics</a>
            </li>
                  <li class="none">
                          <a href="collisions.html" title="Collisions">Collisions</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
  
    <div class="section"><h2>Scene<a name="Scene"></a></h2>
      <p>
        In this first step we are going to setup a simple scene and render
        it. We will have no objects in the scene so nothing will be
        visible yet but later steps in this tutorial will fix this.
      </p>
      <div class="section"><h3>Creating the scene<a name="Creating_the_scene"></a></h3>
        <p>
          For creating a new scene we just need to create an instance of 
          the class <a href="jsdoc/symbols/twodee.Scene.html">twodee.Scene</a>:
        </p>
        <div class="source"><pre>
var scene = new twodee.Scene();       
</pre></div>
        <p>
          The scene needs a root node to display. This can be any type of 
          node but it is recommended to use an instance of the
         <a href="jsdoc/symbols/twodee.SceneNode.html">twodee.SceneNode</a>
           class for this. This kind of scene node can be used for
          hierarchical purposes much like the <i>div</i> element in HTML.
          Later steps in this tutorial simply adds stuff to this root node
          so we don't have to repeat the scene creation code again and again.
        </p>
        <p>
          So let's create this invisible root node:
        </p>
        <div class="source"><pre>
var root = new twodee.SceneNode();
scene.setRootNode(root);
</pre></div>
      </div>
      <div class="section"><h3>Rendering the scene<a name="Rendering_the_scene"></a></h3>
        <p>
          Rendering the scene is the
          most code-intensive part of TwoDee because TwoDee assumes that
          you want to create your own rendering loop. So TwoDee just 
          provides a 
          <a href="jsdoc/symbols/twodee.Scene.html#render">render()</a> method
          which renders the scene into a pre-configured HTML 5 canvas.
          Creating this canvas and clearing it to some background color is
          completely your own responsibility.
        </p> 
        <p>
          The following code is just an example how to setup a rendering
          loop. Feel free to implement your own one:
        </p>
        <div class="source"><pre>
// The canvas element and its 2D context. Initialized once on startup.
var canvas, ctx;

// The interval ID needed to stop rendering.
var renderId;
        
// Initializes the render loop. Must be called once.
function init()
{
    canvas = document.getElementById(&quot;output&quot;);
    ctx = canvas.getContext(&quot;2d&quot;);
}        

// Starts the render loop.
function start()
{
    renderId = setInterval(render, 20);
}

// Stops the render loop.
function stop()
{
    clearInterval(renderId);
}
        
// Renders a single frame.        
function render()
{
    var width, height;

    // Get the canvas size
    width = canvas.width;
    height = canvas.height;

    // Clear canvas
    ctx.clearRect(0, 0, width, height);

    // Update and render the scene
    scene.update(); 
    scene.render(ctx, width, height);
}
</pre></div>
        <p>
          As you can see this render function first calls the
          <a href="jsdoc/symbols/twodee.Scene.html#update">update()</a>
          method to update the scene. This means TwoDee processes animations
          and physics and checks for collisions. Then the render function
          calls the
          <a href="jsdoc/symbols/twodee.Scene.html#render">render()</a>
          method to render the scene into the speciefied canvas 2D context.
        </p>
        <p>
          <i>setInterval</i> is used to call the render function
          periodically. In this example it is called every 20 milliseconds
          which means a frame rate of 50 frames per second. If you want to
          render the animation with as much frames per second
          as possible then you can use 1 as interval. In theory you'll get
          a maximum of 1000 frames per seconds then but no browser can
          do this (yet) but good browsers may give you more than 100 fps
          easily (At least with a simple scene as in this example).
        </p>
        <p>
          And last but not least here is a simple example HTML document
          needed for the above code.  It provides the output canvas and two
          buttons to start and stop the render loop.  It also calls the init
          method when the page is loaded.  This kind of setup is used in all
          the examples of this tutorial:
        </p>
        <div class="source"><pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body onload=&quot;init()&quot;&gt;
    &lt;canvas id=&quot;output&quot; width=&quot;480&quot; height=&quot;320&quot;&gt;&lt;/canvas&gt;
    &lt;button onclick=&quot;start()&quot;&gt;Start&lt;/button&gt;
    &lt;button onclick=&quot;stop()&quot;&gt;Stop&lt;/button&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></div>
      </div>
      <p>
        <a href="polygon.html">Next: Polygon Node &gt;&gt;&gt;</a>
      </p>
    </div>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2009-2011
                        <a href="http://www.ailis.de/~k/">Klaus Reimer</a>.
            All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
